{% extends 'base.html.twig' %}
{% block title %}Hagrosage{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
{% endblock %}

{% block javascripts %}
    <script>
        window.zonesData = {{ zonesJson|raw }};
        window.zoneShowBaseUrl = "{{ path('app_zone_show', {id: '__ID__'}) }}";
    </script>
    <script src="{{ asset('js/geolocalisation.js') }}" defer></script>
{% endblock %}

{% block body %}
<div class="min-h-screen bg-gray-100 flex flex-col">
    <header class="bg-green-600 text-white py-4 px-4">
        <h1 class="text-xl font-bold text-center">Hagrosage</h1>
        <p class="text-sm text-center opacity-90">Gestion d'arrosage intelligent</p>
    </header>

    <main class="flex-1 flex flex-col">
        <div id="map" class="flex-1 h-[60vh] md:h-[70vh] w-full md:w-50vh"></div>

        <div class="bg-white p-4 shadow-lg">
            <h2 class="text-lg font-semibold mb-2">Mes zones</h2>
            <div id="zones-list" class="space-y-2 max-h-[25vh] overflow-y-auto">
                {% if zonesJson == '[]' %}
                    <p class="text-gray-500 text-sm">Aucune zone enregistree</p>
                {% endif %}
            </div>
            <a href="{{ path('app_zone_new') }}" class="mt-3 block w-full bg-green-600 hover:bg-green-700 text-white text-center py-2 px-4 rounded">
                + Ajouter une zone
            </a>
        </div>
    </main>
</div>
{% endblock %}